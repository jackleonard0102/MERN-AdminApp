"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[394],{8394:(e,s,t)=>{t.r(s),t.d(s,{default:()=>S});var a=t(5043),o=t(9800),l=t(1645),i=t(2492),n=t(2019),r=t(9748),c=t(3395),d=t(914),u=t(9029),p=t(5444),m=t(7021),h=t(2645),g=t(9456),f=t(3418),x=t(8402),A=t(6024),y=t(579);const{Title:j,Text:v}=i.A,w=e=>{const s="image/jpeg"===e.type||"image/png"===e.type||"image/webp"===e.type;s||n.Ay.error("You can only upload JPG/PNG/WEBP file!");const t=e.size/1024/1024<2;return t||n.Ay.error("Image must be smaller than 2MB!"),s&&t};const C=function(){const[e]=r.A.useForm(),s=(0,g.d4)((e=>e.auth.loader)),t=(0,g.d4)((e=>e.auth.user)),[o,l]=((0,g.d4)((e=>e.auth.errors)),(0,a.useState)(0)),i=(0,g.wA)(),[C,S]=(0,a.useState)(!1),[N,T]=(0,a.useState)(t.logo),[b,U]=(0,a.useState)(null);return(0,a.useEffect)((()=>{}),[i]),(0,y.jsxs)(c.A,{className:"max-w-xl w-full shadow-lg",children:[(0,y.jsxs)("div",{className:"my-4",children:[(0,y.jsx)(j,{level:3,children:"Welcome Page Information"}),(0,y.jsx)(v,{type:"secondary",children:"Update your welcome page's logo, site code, and app version."})]}),(0,y.jsxs)(r.A,{name:"settings",form:e,initialValues:{siteCode:t.siteCode||"",appVersion:t.appVersion||""},className:"form",scrollToFirstError:!0,onFinish:e=>{console.log("Received values of form: ",e),(async e=>{try{const s=await fetch("".concat(f.A.HOST_URL,"settings/update"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:(0,x.c7)("token")},body:JSON.stringify({siteCode:e.siteCode,appVersion:e.appVersion})});(await s.json()).success?n.Ay.success("Settings updated successfully"):n.Ay.error("Failed to update settings")}catch(s){n.Ay.error("Error updating settings"),console.error(s)}})(e)},children:[(0,y.jsx)(r.A.Item,{name:"logo",children:(0,y.jsx)(h.A,{rotationSlider:!0,children:(0,y.jsx)(d.A,{name:"file",listType:"picture-card",className:"logo-uploader",multiple:!1,showUploadList:!1,action:"".concat(f.A.HOST_URL,"settings/upload-logo"),accept:"image/*",headers:{Authorization:(0,x.c7)("token")},data:{oldFile:N},beforeUpload:w,onChange:e=>{var s,t;"uploading"!==e.file.status?"done"===e.file.status&&(T(null===(s=e.file.response)||void 0===s?void 0:s.path),U("".concat(f.A.SOCKET_URL).concat(null===(t=e.file.response)||void 0===t?void 0:t.path)),S(!1),i((0,A.wz)()),l((e=>e+1))):S(!0)},children:C?(0,y.jsx)(u.A,{}):(0,y.jsxs)("div",{className:"relative",children:[(0,y.jsx)("img",{src:b||N?"".concat(f.A.SOCKET_URL).concat(b||N,"?reload=").concat((new Date).getTime()):"/imgs/logo.jpg",alt:"logo",className:"w-full rounded-full"}),(0,y.jsx)("div",{className:"rounded-full absolute top-0 left-0 w-full h-full hover:bg-[#000a] opacity-0 hover:opacity-100 flex items-center justify-center text-white",children:"Change"})]})})})}),(0,y.jsx)(r.A.Item,{name:"siteCode",rules:[{required:!0,message:"Please input the Site Code!"}],children:(0,y.jsx)(p.A,{size:"large",placeholder:"Site Code"})}),(0,y.jsx)(r.A.Item,{name:"appVersion",rules:[{required:!0,message:"Please input the App Version!"}],children:(0,y.jsx)(p.A,{size:"large",placeholder:"App Version"})}),(0,y.jsx)(r.A.Item,{children:(0,y.jsx)(m.Ay,{loading:s,type:"primary",htmlType:"submit",className:"mt-2",size:"large",children:"Save"})})]})]})};const S=function(){return(0,y.jsx)("div",{className:"container mx-auto my-4 px-4",children:(0,y.jsx)(o.A,{gutter:[16,16],children:(0,y.jsx)(l.A,{span:24,className:"flex justify-center",children:(0,y.jsx)(C,{})})})})}}}]);
//# sourceMappingURL=394.54834720.chunk.js.map